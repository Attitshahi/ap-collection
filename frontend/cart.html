<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cart - Ap Collection</title>
<link rel="stylesheet" href="css/style.css">
</head>
<body>
<header>
    <div class="logo">Ap Collection</div>
    <nav>
        <a href="index.html">Home</a>
        <a href="shop.html">Shop</a>
        <a href="cart.html">Cart</a>
    </nav>
</header>

<section class="cart">
    <h2>Your Cart</h2>
    <div id="cart-list"></div>
    <button onclick="checkout()">Proceed to Checkout</button>
</section>

<footer>
    &copy; 2025 Ap Collection. All rights reserved.
</footer>

<script>
let cart = JSON.parse(localStorage.getItem('cart')) || [];
const cartList = document.getElementById('cart-list');

function renderCart(){
    cartList.innerHTML = '';
    cart.forEach(item => {
        fetch(`http://localhost:3000/api/products/${item.id}`)
        .then(res => res.json())
        .then(product => {
            const div = document.createElement('div');
            div.innerHTML = `
                <p>${product.name} - Rs ${product.price} x ${item.qty}</p>
                <button onclick="removeItem(${item.id})">Remove</button>
            `;
            cartList.appendChild(div);
        });
    });
}

function removeItem(id){
    cart = cart.filter(item => item.id !== id);
    localStorage.setItem('cart', JSON.stringify(cart));
    renderCart();
}

function checkout(){
    window.location.href = 'checkout.html';
}

renderCart();
</script>
</body>
</html>
